{"version":3,"sources":["webpack:///./src/app/image-view/image-view.module.ts","webpack:///./src/app/image-view/image-view.page.html","webpack:///./src/app/image-view/image-view.page.ts"],"names":[],"mappings":"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","file":"image-view-image-view-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { ImageViewPage } from './image-view.page';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        RouterModule.forChild([\n            {\n                path: '',\n                component: ImageViewPage\n            }\n        ])\n    ],\n    declarations: [ImageViewPage]\n})\nexport class ImageViewPageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button defaultHref=\\\"image-results\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>\\n            Image View\\n        </ion-title>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button (click)=\\\"estimateBlurriness()\\\">\\n                <ion-icon slot=\\\"start\\\" name=\\\"glasses\\\"></ion-icon>\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n    <img [src]=\\\"sanitizedPreviewImage\\\" />\\n</ion-content>\\n\\n<ion-footer>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-button (click)=\\\"startCroppingScreen()\\\">\\n                <ion-icon slot=\\\"start\\\" name=\\\"crop\\\"></ion-icon>\\n                Crop / Rotate\\n            </ion-button>\\n            <ion-button (click)=\\\"showFilterSelection()\\\">\\n                <ion-icon slot=\\\"start\\\" name=\\\"contrast\\\"></ion-icon>\\n                Filter\\n            </ion-button>\\n        </ion-buttons>\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button (click)=\\\"deletePage()\\\">\\n                <ion-icon slot=\\\"start\\\" name=\\\"trash\\\"></ion-icon>\\n                Delete\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-footer>\\n\"","import { Component, OnInit } from '@angular/core';\nimport { ActionSheetController } from '@ionic/angular';\nimport { ActivatedRoute, Router, ParamMap } from '@angular/router';\nimport { switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\nimport { ImageFilter, Page } from 'cordova-plugin-scanbot-sdk';\n\nimport { DialogsService } from '../services/dialogs.service';\nimport { ScanbotSdkDemoService } from '../services/scanbot-sdk-demo.service';\nimport { ImageResultsRepository } from '../services/image-results.repository';\n\n@Component({\n    selector: 'app-image-view',\n    templateUrl: 'image-view.page.html',\n})\nexport class ImageViewPage implements OnInit {\n\n    public page: Page;\n    public sanitizedPreviewImage: string;\n\n    private imageFilterList: ImageFilter[] = [\n        'NONE',\n        'COLOR_ENHANCED',\n        'GRAYSCALE',\n        'BINARIZED',\n        'COLOR_DOCUMENT',\n        'PURE_BINARIZED',\n        'BACKGROUND_CLEAN',\n        'BLACK_AND_WHITE',\n        'OTSU_BINARIZATION',\n        'DEEP_BINARIZATION',\n        'EDGE_HIGHLIGHT',\n        'LOW_LIGHT_BINARIZATION',\n        'LOW_LIGHT_BINARIZATION_2',\n        'SENSITIVE_BINARIZATION'\n    ];\n\n    constructor(private scanbotService: ScanbotSdkDemoService,\n                private imageResultsRepository: ImageResultsRepository,\n                private dialogsService: DialogsService,\n                private router: Router,\n                private route: ActivatedRoute,\n                private actionSheetController: ActionSheetController) { }\n\n    ngOnInit() {\n        this.route.paramMap.pipe(\n            switchMap((params: ParamMap) => of(params.get('pageId')))\n        ).subscribe(pageId => {\n            this.page = this.imageResultsRepository.getPageById(pageId);\n            this.sanitizePreviewImage();\n        });\n    }\n\n    private async sanitizePreviewImage() {\n        const data = await this.scanbotService.fetchDataFromUri(this.page.documentPreviewImageFileUri);\n        this.sanitizedPreviewImage = this.imageResultsRepository.sanitizeBase64(data);\n    }\n\n    async startCroppingScreen() {\n        if (!(await this.scanbotService.checkLicense())) { return; }\n\n        const result = await this.scanbotService.SDK.UI.startCroppingScreen({\n            page: this.page,\n            uiConfigs: {\n                // Customize colors, text resources, behavior, etc..\n                doneButtonTitle: 'Save',\n                orientationLockMode: 'PORTRAIT',\n                topBarBackgroundColor: '#c8193c',\n                bottomBarBackgroundColor: '#c8193c',\n                hintTitle: 'Custom hint:\\nDrag the dots to the document edges.',\n                hintTitleColor: '#0000ff'\n                // ...\n            }\n        });\n\n        if (result.status === 'CANCELED') { return; }\n\n        await this.updatePage(result.page);\n    }\n\n    async deletePage() {\n        await this.scanbotService.SDK.removePage({page: this.page});\n        await this.imageResultsRepository.removePage(this.page);\n        await this.router.navigate(['/image-results']);\n    }\n\n    private async updatePage(page: Page) {\n        await this.imageResultsRepository.updatePage(page);\n        this.page = page;\n        this.sanitizePreviewImage();\n    }\n\n    async showFilterSelection() {\n        const buttons = [];\n        this.imageFilterList.forEach(f => {\n            buttons.push({\n                text: f,\n                handler: () => { this.applyImageFilter(f); }\n            });\n        });\n\n        buttons.push({\n            text: 'Cancel',\n            role: 'cancel',\n            handler: () => { }\n        });\n\n        const actionSheet = await this.actionSheetController.create({\n            header: 'Select an Image Filter',\n            buttons: buttons,\n            cssClass: \"image-filters-action-sheet\"\n        });\n        await actionSheet.present();\n    }\n\n    private async applyImageFilter(filter: ImageFilter) {\n        if (!(await this.scanbotService.checkLicense())) { return; }\n\n        const loading = await this.dialogsService.createLoading('Applying image filter ...');\n        try {\n            await loading.present();\n            const result = await this.scanbotService.SDK.applyImageFilterOnPage({page: this.page, imageFilter: filter});\n            await this.updatePage(result.page);\n        }\n        finally {\n            await loading.dismiss();\n        }\n    }\n\n    async estimateBlurriness() {\n        if (!(await this.scanbotService.checkLicense())) { return; }\n\n        const loading = await this.dialogsService.createLoading('Estimating blurriness ...');\n        try {\n            await loading.present();\n            /**\n             * Estimates image blurriness. Less is sharper, more is blurred.\n             *\n             * In board terms, consider blur values as follows:\n             * • 0.0-0.3: This image isn't blurry at all\n             * • 0.3-0.6: Somewhat blurry, should be ok\n             * • 0.6-1.0: I'm skeptical of the usefulness of the image\n             *\n             * However, this isn't that black and white. If a scanned document has a lot white background,\n             * that will be considered a very blurred image.\n             */\n            const blurResult = await this.scanbotService.SDK.estimateBlur({imageFileUri: this.page.documentImageFileUri});\n            await this.dialogsService.showAlert('Estimated blurriness on image: ' + blurResult.blur);\n        }\n        finally {\n            await loading.dismiss();\n        }\n    }\n}\n"],"sourceRoot":""}